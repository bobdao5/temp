import{c as d}from"./@ethereumjs-ec0ac526.js";import{r as w}from"./domelementtype-56ff57a0.js";var s={},y=d&&d.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(o[f]=i[f])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=d&&d.__assign||function(){return v=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},v.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0});s.cloneNode=s.hasChildren=s.isDocument=s.isDirective=s.isComment=s.isText=s.isCDATA=s.isTag=s.Element=s.Document=s.NodeWithChildren=s.ProcessingInstruction=s.Comment=s.Text=s.DataNode=s.Node=void 0;var c=w(),H=new Map([[c.ElementType.Tag,1],[c.ElementType.Script,1],[c.ElementType.Style,1],[c.ElementType.Directive,1],[c.ElementType.Text,3],[c.ElementType.CDATA,4],[c.ElementType.Comment,8],[c.ElementType.Root,9]]),N=function(){function e(t){this.type=t,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){var t;return(t=H.get(this.type))!==null&&t!==void 0?t:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),E(this,t)},e}();s.Node=N;var g=function(e){y(t,e);function t(n,o){var i=e.call(this,n)||this;return i.data=o,i}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(N);s.DataNode=g;var D=function(e){y(t,e);function t(n){return e.call(this,c.ElementType.Text,n)||this}return t}(g);s.Text=D;var O=function(e){y(t,e);function t(n){return e.call(this,c.ElementType.Comment,n)||this}return t}(g);s.Comment=O;var _=function(e){y(t,e);function t(n,o){var i=e.call(this,c.ElementType.Directive,o)||this;return i.name=n,i}return t}(g);s.ProcessingInstruction=_;var b=function(e){y(t,e);function t(n,o){var i=e.call(this,n)||this;return i.children=o,i}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(N);s.NodeWithChildren=b;var I=function(e){y(t,e);function t(n){return e.call(this,c.ElementType.Root,n)||this}return t}(b);s.Document=I;var P=function(e){y(t,e);function t(n,o,i,f){i===void 0&&(i=[]),f===void 0&&(f=n==="script"?c.ElementType.Script:n==="style"?c.ElementType.Style:c.ElementType.Tag);var h=e.call(this,f,i)||this;return h.name=n,h.attribs=o,h}return Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(o){var i,f;return{name:o,value:n.attribs[o],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[o],prefix:(f=n["x-attribsPrefix"])===null||f===void 0?void 0:f[o]}})},enumerable:!1,configurable:!0}),t}(b);s.Element=P;function j(e){return(0,c.isTag)(e)}s.isTag=j;function S(e){return e.type===c.ElementType.CDATA}s.isCDATA=S;function A(e){return e.type===c.ElementType.Text}s.isText=A;function W(e){return e.type===c.ElementType.Comment}s.isComment=W;function L(e){return e.type===c.ElementType.Directive}s.isDirective=L;function M(e){return e.type===c.ElementType.Root}s.isDocument=M;function R(e){return Object.prototype.hasOwnProperty.call(e,"children")}s.hasChildren=R;function E(e,t){t===void 0&&(t=!1);var n;if(A(e))n=new D(e.data);else if(W(e))n=new O(e.data);else if(j(e)){var o=t?x(e.children):[],i=new P(e.name,v({},e.attribs),o);o.forEach(function(u){return u.parent=i}),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=v({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=v({},e["x-attribsPrefix"])),n=i}else if(S(e)){var o=t?x(e.children):[],f=new b(c.ElementType.CDATA,o);o.forEach(function(r){return r.parent=f}),n=f}else if(M(e)){var o=t?x(e.children):[],h=new I(o);o.forEach(function(r){return r.parent=h}),e["x-mode"]&&(h["x-mode"]=e["x-mode"]),n=h}else if(L(e)){var m=new _(e.name,e.data);e["x-name"]!=null&&(m["x-name"]=e["x-name"],m["x-publicId"]=e["x-publicId"],m["x-systemId"]=e["x-systemId"]),n=m}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}s.cloneNode=E;function x(e){for(var t=e.map(function(o){return E(o,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}var T={},C;function B(){return C||(C=1,function(e){var t=d&&d.__createBinding||(Object.create?function(u,r,a,l){l===void 0&&(l=a);var p=Object.getOwnPropertyDescriptor(r,a);(!p||("get"in p?!r.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return r[a]}}),Object.defineProperty(u,l,p)}:function(u,r,a,l){l===void 0&&(l=a),u[l]=r[a]}),n=d&&d.__exportStar||function(u,r){for(var a in u)a!=="default"&&!Object.prototype.hasOwnProperty.call(r,a)&&t(r,u,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var o=w(),i=s;n(s,e);var f=/\s+/g,h={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1,xmlMode:!1},m=function(){function u(r,a,l){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof a=="function"&&(l=a,a=h),typeof r=="object"&&(a=r,r=void 0),this.callback=r??null,this.options=a??h,this.elementCB=l??null}return u.prototype.onparserinit=function(r){this.parser=r},u.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},u.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},u.prototype.onerror=function(r){this.handleCallback(r)},u.prototype.onclosetag=function(){this.lastNode=null;var r=this.tagStack.pop();this.options.withEndIndices&&(r.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(r)},u.prototype.onopentag=function(r,a){var l=this.options.xmlMode?o.ElementType.Tag:void 0,p=new i.Element(r,a,void 0,l);this.addNode(p),this.tagStack.push(p)},u.prototype.ontext=function(r){var a=this.options.normalizeWhitespace,l=this.lastNode;if(l&&l.type===o.ElementType.Text)a?l.data=(l.data+r).replace(f," "):l.data+=r,this.options.withEndIndices&&(l.endIndex=this.parser.endIndex);else{a&&(r=r.replace(f," "));var p=new i.Text(r);this.addNode(p),this.lastNode=p}},u.prototype.oncomment=function(r){if(this.lastNode&&this.lastNode.type===o.ElementType.Comment){this.lastNode.data+=r;return}var a=new i.Comment(r);this.addNode(a),this.lastNode=a},u.prototype.oncommentend=function(){this.lastNode=null},u.prototype.oncdatastart=function(){var r=new i.Text(""),a=new i.NodeWithChildren(o.ElementType.CDATA,[r]);this.addNode(a),r.parent=a,this.lastNode=r},u.prototype.oncdataend=function(){this.lastNode=null},u.prototype.onprocessinginstruction=function(r,a){var l=new i.ProcessingInstruction(r,a);this.addNode(l)},u.prototype.handleCallback=function(r){if(typeof this.callback=="function")this.callback(r,this.dom);else if(r)throw r},u.prototype.addNode=function(r){var a=this.tagStack[this.tagStack.length-1],l=a.children[a.children.length-1];this.options.withStartIndices&&(r.startIndex=this.parser.startIndex),this.options.withEndIndices&&(r.endIndex=this.parser.endIndex),a.children.push(r),l&&(r.prev=l,l.next=r),r.parent=a,this.lastNode=null},u}();e.DomHandler=m,e.default=m}(T)),T}export{s as n,B as r};
